# Plan 06-02: Test API and data functions

## Goal

Add tests for pure functions that don't require React hooks.

## Why

- These are the most straightforward to test
- Critical for catching regressions in data handling
- Don't require complex mocking

## Files to Test

### rescueGroups.ts
- `getFallbackCats()` - returns array of 5 fallback cats
- `isApiConfigured()` - returns boolean based on env var

### oracleResponses.ts
- `getRandomResponse()` - returns OracleResponse object
- Should return valid response with text and category
- Should not repeat immediately (has anti-repeat logic)

## Tasks

### Task 1: Create src/services/rescueGroups.test.ts
- Test getFallbackCats returns 5 cats
- Test each cat has required fields (id, name, photo, etc.)
- Test isApiConfigured returns boolean

### Task 2: Create src/data/oracleResponses.test.ts
- Test getRandomResponse returns valid OracleResponse
- Test response has text and category properties
- Test category is one of the defined OracleCategory values
- Test anti-repeat: calling twice shouldn't return same response (probabilistic)

### Task 3: Verify all tests pass
- Run `npm run test:run`
- Confirm no failures

## Verification

- [ ] src/services/rescueGroups.test.ts exists
- [ ] src/data/oracleResponses.test.ts exists
- [ ] All tests pass
- [ ] Tests cover critical paths

## Notes

- These tests are pure unit tests, no DOM needed
- getFallbackCats is private but can be tested via fetchAdoptableCats without API key
