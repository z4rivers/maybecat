---
phase: 01-color-foundations
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - "Figma file kIX8fJJs3PIO6uJTQuNu8l (02 Semantic collection, 03 Component collection)"
  - ".planning/phases/01-color-foundations/01-02-SUMMARY.md"
autonomous: true

must_haves:
  truths:
    - "02 Semantic collection exists with purpose-named variables that alias primitives"
    - "03 Component collection exists with component-specific tokens that alias semantics"
    - "Every semantic variable resolves to a primitive (no raw hex values in semantic layer)"
    - "Every component variable resolves to a semantic (no skipping the semantic layer)"
    - "text/ semantic variables are scoped to TEXT_FILL"
    - "surface/ semantic variables are scoped to FRAME_FILL and SHAPE_FILL"
    - "border/ semantic variables are scoped to STROKE_COLOR"
  artifacts:
    - path: "Figma file 02 Semantic collection"
      provides: "Purpose-mapped color aliases"
    - path: "Figma file 03 Component collection"
      provides: "Component-specific color tokens"
  key_links:
    - from: "02 Semantic variables"
      to: "01 Primitives variables"
      via: "Figma variable alias reference"
      pattern: "Each semantic variable's value is an alias to a primitive"
    - from: "03 Component variables"
      to: "02 Semantic variables"
      via: "Figma variable alias reference"
      pattern: "Each component variable's value is an alias to a semantic"
---

<objective>
Create the `02 Semantic` and `03 Component` variable collections in Figma, completing the three-tier color architecture. Semantic variables map primitives to purpose names (what colors MEAN). Component variables map semantics to specific UI element tokens (where colors are USED).

Purpose: Designers apply component tokens to elements. When a color needs to change, only the semantic or primitive alias is updated, and all components update automatically. This completes the aliasing chain: Primitive -> Semantic -> Component.

Output: Two Figma variable collections — `02 Semantic` (~26 variables) and `03 Component` (~28 variables) — with every variable aliased to the tier below it.
</objective>

<execution_context>
@C:\Users\Zachary Turner\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Zachary Turner\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-color-foundations/01-RESEARCH.md
@.planning/phases/01-color-foundations/01-CONTEXT.md
@.planning/phases/01-color-foundations/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create 02 Semantic collection with purpose-mapped aliases</name>
  <files>Figma file kIX8fJJs3PIO6uJTQuNu8l</files>
  <action>
Create a new variable collection named `02 Semantic`. Set all variables to Color type. Each variable's VALUE must be set as an ALIAS REFERENCE to a primitive in `01 Primitives` — NOT a raw hex value.

To create an alias: when setting the variable value, click the hex field, select "Library Variables" or the variable icon, navigate to `01 Primitives`, and select the correct primitive.

### text/ group (6 variables) — Scope: TEXT_FILL
| Variable Name | Aliases Primitive | Description |
|---------------|-------------------|-------------|
| `text/primary` | `amber/900` | Main title and heading text. |
| `text/secondary` | `amber/950` | Tagline, secondary headings. |
| `text/accent` | `amber/100` | Light text on dark surfaces (label text, card text). |
| `text/muted` | `opacity/amber-800-70` | Subdued text (example question labels). |
| `text/on-dark` | `ui/error-text` | Text on dark backgrounds (error boundary, banner). |
| `text/on-action` | `amber/100` | Text on action buttons and CTAs. |

### surface/ group (6 variables) — Scope: FRAME_FILL, SHAPE_FILL
| Variable Name | Aliases Primitive | Description |
|---------------|-------------------|-------------|
| `surface/page-start` | `pink/500` | Main page gradient start (pink). |
| `surface/page-mid` | `pink/400` | Main page gradient mid. |
| `surface/page-end` | `amber/600` | Main page gradient end (gold). |
| `surface/card` | `amber/100` | Oracle card and form card background. |
| `surface/card-inner` | `amber/50` | Inner card surfaces, photo frame bg. |
| `surface/photo-frame` | `amber/50` | Cat photo frame background. |

### border/ group (5 variables) — Scope: STROKE_COLOR
| Variable Name | Aliases Primitive | Description |
|---------------|-------------------|-------------|
| `border/primary` | `amber/800` | Main border for modals, cards, photo frames. |
| `border/secondary` | `amber/900` | Upload card border, dashed circle. |
| `border/accent` | `amber/400` | Adopt badge border, decorative gold borders. |
| `border/decorative` | `opacity/amber-800-60` | Divider lines, subtle decorative borders. |
| `border/pill` | `opacity/amber-600-30` | Example question pill border. |

### icon/ group (3 variables) — Scope: FRAME_FILL, SHAPE_FILL
| Variable Name | Aliases Primitive | Description |
|---------------|-------------------|-------------|
| `icon/primary` | `amber/800` | Primary icon and symbol color (crescents, stars). |
| `icon/secondary` | `opacity/amber-900-60` | Decorative vine fill, muted icons. |
| `icon/accent` | `amber/400` | Gold accent icons, sparkles. |

### interactive/ group (2 variables) — Scope: ALL_FILLS
| Variable Name | Aliases Primitive | Description |
|---------------|-------------------|-------------|
| `interactive/focus-ring` | `amber/400` | Focus ring color for inputs and buttons. |
| `interactive/hover-bg` | `opacity/amber-900-20` | Hover background for adoption CTA. |

**Scoping instructions:**
After creating all semantic variables, apply scoping:
1. Select all `text/*` variables -> Edit -> Scope -> check only TEXT_FILL
2. Select all `surface/*` variables -> Edit -> Scope -> check FRAME_FILL + SHAPE_FILL
3. Select all `border/*` variables -> Edit -> Scope -> check only STROKE_COLOR
4. Select all `icon/*` variables -> Edit -> Scope -> check FRAME_FILL + SHAPE_FILL
5. Leave `interactive/*` at ALL_FILLS (used for both bg fills and focus rings)

**Total: 22 semantic variables across 5 groups**
  </action>
  <verify>
Use `get_variable_defs` on the Figma file to confirm `02 Semantic` collection exists with 22 variables. Verify at least 3 variables are alias references (not raw hex) by checking they resolve to a primitive name rather than a hex value.
  </verify>
  <done>
02 Semantic collection exists with 22 variables across 5 groups (text, surface, border, icon, interactive). Every variable is an alias to a primitive. Scoping applied: text vars -> TEXT_FILL, surface vars -> FRAME_FILL + SHAPE_FILL, border vars -> STROKE_COLOR.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create 03 Component collection with component-specific tokens</name>
  <files>Figma file kIX8fJJs3PIO6uJTQuNu8l</files>
  <action>
Create a new variable collection named `03 Component`. Set all variables to Color type. Each variable's VALUE must be set as an ALIAS REFERENCE to a variable in `02 Semantic` — NOT to a primitive and NOT to a raw hex value. This enforces the three-tier chain: Primitive -> Semantic -> Component.

### button/ group (4 variables)
| Variable Name | Aliases Semantic | Description |
|---------------|------------------|-------------|
| `button/primary-bg` | `border/primary` | Dark amber button gradient reference (amber-800). |
| `button/primary-text` | `text/on-action` | Button label text color. |
| `button/accent-border` | `border/accent` | Gold accent border on celestial/nav buttons. |
| `button/focus` | `interactive/focus-ring` | Button focus ring. |

### input/ group (5 variables)
| Variable Name | Aliases Semantic | Description |
|---------------|------------------|-------------|
| `input/bg` | `surface/card-inner` | Input field background (amber-50). |
| `input/border` | `border/primary` | Input field border (amber-800). |
| `input/text` | `text/primary` | Input text color. |
| `input/placeholder` | `border/decorative` | Placeholder text color (muted amber). |
| `input/focus-border` | `interactive/focus-ring` | Input focus border ring. |

### modal/ group (5 variables)
| Variable Name | Aliases Semantic | Description |
|---------------|------------------|-------------|
| `modal/overlay` | `interactive/hover-bg` | Modal backdrop overlay. NOTE: This is a workaround — the actual overlay uses ui/overlay-bg (amber-950/85). Since the semantic layer doesn't have a direct match for the overlay, alias to the closest semantic and note that the Figma layer should use ui/overlay-bg primitive directly for the modal overlay specifically. |
| `modal/surface` | `surface/card` | Modal card background. |
| `modal/border` | `border/primary` | Modal card border. |
| `modal/text` | `text/primary` | Modal text color. |
| `modal/accent` | `text/accent` | Modal accent text (light amber). |

**IMPORTANT NOTE on modal/overlay:** The modal overlay is a special case. The actual value needed is `ui/overlay-bg` (`#451A03D9` = amber-950 at 85%). No semantic variable maps directly to this specific overlay use case. Two options for the executor:

**Option A (Recommended):** Add a semantic variable `surface/overlay` that aliases `ui/overlay-bg`, then alias `modal/overlay` to `surface/overlay`. This keeps the chain intact.

**Option B:** Skip `modal/overlay` in the Component collection and document that the modal overlay should use the `ui/overlay-bg` primitive directly. This breaks the three-tier rule for one edge case but avoids a contrived semantic name.

**Choose Option A** — add `surface/overlay` aliasing `ui/overlay-bg` to the Semantic collection (making it 23 semantics), then alias `modal/overlay` to `surface/overlay`.

### header/ group (3 variables)
| Variable Name | Aliases Semantic | Description |
|---------------|------------------|-------------|
| `header/title` | `text/primary` | Main site title text color. |
| `header/subtitle` | `text/secondary` | Tagline/subtitle color. |
| `header/decoration` | `icon/primary` | Decorative elements in header (moon, stars). |

### banner/ group (4 variables)
| Variable Name | Aliases Semantic | Description |
|---------------|------------------|-------------|
| `banner/bg` | `text/on-dark` | Banner background. NOTE: This is another special case — the actual banner bg is `ui/banner-bg`. Add `surface/banner` aliasing `ui/banner-bg` to Semantic collection (now 24 semantics), then alias `banner/bg` to `surface/banner`. |
| `banner/text` | `text/on-dark` | Banner body text color. |
| `banner/accent` | `border/accent` | Banner accent/highlight color. |
| `banner/divider` | `border/decorative` | Banner section dividers. |

**IMPORTANT: Same pattern as modal/overlay.** Add `surface/banner` aliasing `ui/banner-bg` to Semantic collection before creating `banner/bg`. Then alias `banner/bg` to `surface/banner`.

### card-name/ group (2 variables)
| Variable Name | Aliases Semantic | Description |
|---------------|------------------|-------------|
| `card-name/bg` | `border/primary` | Cat name badge background (amber-800 pill). |
| `card-name/text` | `text/accent` | Cat name badge text (light amber). |

### adopt-badge/ group (5 variables)
| Variable Name | Aliases Semantic | Description |
|---------------|------------------|-------------|
| `adopt-badge/gradient-start` | `surface/page-start` | Adopt badge gradient start (pink-500). |
| `adopt-badge/gradient-mid` | `border/primary` | Adopt badge gradient mid. NOTE: The actual value is pink-700 (#BE185D). No exact semantic match exists. The executor should add `surface/badge-mid` aliasing `pink/700` to Semantic collection (now 25 semantics), then alias `adopt-badge/gradient-mid` to `surface/badge-mid`. |
| `adopt-badge/gradient-end` | `text/primary` | Adopt badge gradient end. NOTE: Actual value is pink-900 (#831843). Add `surface/badge-end` aliasing `pink/900` to Semantic (now 26 semantics), then alias here. |
| `adopt-badge/border` | `border/accent` | Adopt badge gold border. |
| `adopt-badge/text` | `text/accent` | Adopt badge label text. |

### Summary of Semantic Additions

During this task, add these additional semantic variables to `02 Semantic` before creating the component aliases:

| Variable Name | Aliases Primitive | Group | Description |
|---------------|-------------------|-------|-------------|
| `surface/overlay` | `ui/overlay-bg` | surface/ | Modal/overlay backdrop. |
| `surface/banner` | `ui/banner-bg` | surface/ | Banner dark background. |
| `surface/badge-mid` | `pink/700` | surface/ | Adopt badge gradient mid. |
| `surface/badge-end` | `pink/900` | surface/ | Adopt badge gradient end. |

This brings the Semantic total to **26 variables** and the Component total to **28 variables**.

**Total: 28 component variables across 7 groups**
  </action>
  <verify>
Use `get_variable_defs` to confirm:
1. `03 Component` collection exists with 28 variables across 7 groups
2. `02 Semantic` collection now has 26 variables (original 22 + 4 additions)
3. Spot-check the aliasing chain for at least 2 variables end-to-end:
   - `header/title` -> `text/primary` -> `amber/900` -> `#78350F`
   - `modal/overlay` -> `surface/overlay` -> `ui/overlay-bg` -> `#451A03D9`
  </verify>
  <done>
03 Component collection exists with 28 variables across 7 groups (button, input, modal, header, banner, card-name, adopt-badge). Every component variable aliases a semantic variable. The three-tier chain is intact: every component token resolves through a semantic to a primitive. 02 Semantic collection updated to 26 total variables.
  </done>
</task>

</tasks>

<verification>
1. Open Figma file Variables panel
2. Confirm 3 collections exist: `01 Primitives`, `02 Semantic`, `03 Component`
3. Confirm total variable counts: ~85 primitives, ~26 semantic, ~28 component = ~139 total
4. Test aliasing chain: pick any component variable, verify it resolves to a semantic, which resolves to a primitive hex value
5. Verify scoping: when selecting a text layer, only text-scoped variables appear; when selecting a frame fill, only surface-scoped variables appear
6. Verify card theme groups in Primitives are complete: 5 themes x 6 variables each (gradient-start, gradient-mid, gradient-end, border, accent, text)
7. Verify the 5 shelter card color themes each have all 6 required variables per user decision
8. Verify dark overlay (ui/overlay-bg) and banner bg (ui/banner-bg) exist as primitive variables and are properly aliased through the semantic layer
</verification>

<success_criteria>
- 02 Semantic collection exists with 26 purpose-named variables across 6 groups
- 03 Component collection exists with 28 component-specific tokens across 7 groups
- Every semantic variable is an alias to a primitive (zero raw hex values in semantic layer)
- Every component variable is an alias to a semantic (zero skipped tiers)
- Scoping applied to semantic text/surface/border/icon groups
- The complete three-tier aliasing chain works end-to-end
- Combined with Plan 01, all 5 requirements (COLOR-01 through COLOR-05) are satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/01-color-foundations/01-02-SUMMARY.md`
</output>
