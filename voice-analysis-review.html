<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oracle Voice Analysis Review</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      background: #1a1a2e;
      color: #eee;
    }
    h1 { color: #f5c518; margin-bottom: 10px; }
    .summary {
      background: #16213e;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .summary h2 { color: #f5c518; margin-top: 0; }
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }
    .stat-box {
      background: #0f3460;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }
    .stat-number { font-size: 32px; font-weight: bold; color: #f5c518; }
    .stat-label { color: #aaa; font-size: 14px; }
    .filters {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }
    .filter-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      background: #0f3460;
      color: #eee;
      font-size: 14px;
      transition: all 0.2s;
    }
    .filter-btn:hover { background: #1a4a8a; }
    .filter-btn.active { background: #f5c518; color: #000; }
    .response-card {
      background: #16213e;
      padding: 15px 20px;
      margin-bottom: 10px;
      border-radius: 8px;
      border-left: 4px solid #0f3460;
      display: flex;
      gap: 15px;
      align-items: flex-start;
    }
    .response-card.first-person { border-left-color: #4CAF50; }
    .response-card.second-person { border-left-color: #2196F3; }
    .response-card.impersonal { border-left-color: #9C27B0; }
    .response-card.mixed { border-left-color: #FF9800; }
    .response-card.hidden { display: none; }
    .response-card.flagged { background: #2a1a1e; border-left-color: #f44336; }
    .response-text {
      flex: 1;
      font-size: 16px;
      line-height: 1.5;
    }
    .response-meta {
      display: flex;
      gap: 10px;
      margin-top: 8px;
      font-size: 12px;
      color: #888;
    }
    .category-tag {
      background: #0f3460;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 11px;
    }
    .voice-tag {
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 11px;
      font-weight: bold;
    }
    .voice-tag.first-person { background: #4CAF50; color: #000; }
    .voice-tag.second-person { background: #2196F3; color: #fff; }
    .voice-tag.impersonal { background: #9C27B0; color: #fff; }
    .voice-tag.mixed { background: #FF9800; color: #000; }
    .line-num { color: #666; font-size: 12px; min-width: 50px; }
    .actions {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .flag-btn {
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      background: #333;
      color: #eee;
    }
    .flag-btn:hover { background: #555; }
    .flag-btn.flagged { background: #f44336; color: #fff; }
    .export-section {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #16213e;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }
    .export-btn {
      padding: 10px 20px;
      background: #f5c518;
      color: #000;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    .flagged-count { margin-bottom: 10px; font-size: 14px; }
    .highlight-first { color: #4CAF50; font-weight: bold; }
    .highlight-second { color: #2196F3; font-weight: bold; }
    .legend {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <h1>Oracle Voice Analysis Review</h1>

  <div class="summary">
    <h2>Voice Distribution Summary</h2>
    <div class="stats" id="stats"></div>

    <h3>Understanding Voices</h3>
    <ul>
      <li><strong>First Person (I/me/my)</strong> - Cat speaks as self: "I chose you", "I'm not in the mood"</li>
      <li><strong>Second Person (you/your)</strong> - Addresses user directly: "You need rest", "Your path becomes clear"</li>
      <li><strong>Impersonal</strong> - Neither: "No.", "*turns away*", "Noted.", action descriptions</li>
      <li><strong>Mixed</strong> - Both voices: "I've been watching you", "What you seek is already within you"</li>
    </ul>

    <div class="legend">
      <div class="legend-item"><div class="legend-color" style="background:#4CAF50"></div> First Person</div>
      <div class="legend-item"><div class="legend-color" style="background:#2196F3"></div> Second Person</div>
      <div class="legend-item"><div class="legend-color" style="background:#9C27B0"></div> Impersonal</div>
      <div class="legend-item"><div class="legend-color" style="background:#FF9800"></div> Mixed</div>
    </div>
  </div>

  <div class="filters">
    <button class="filter-btn active" data-filter="all">All</button>
    <button class="filter-btn" data-filter="first-person">First Person (I)</button>
    <button class="filter-btn" data-filter="second-person">Second Person (You)</button>
    <button class="filter-btn" data-filter="impersonal">Impersonal</button>
    <button class="filter-btn" data-filter="mixed">Mixed</button>
    <button class="filter-btn" data-filter="flagged">Flagged Only</button>
  </div>

  <div id="responses"></div>

  <div class="export-section">
    <div class="flagged-count">Flagged: <span id="flaggedCount">0</span></div>
    <button class="export-btn" onclick="exportFlagged()">Export Flagged</button>
  </div>

  <script>
    // Voice analysis data - auto-generated from oracleResponses.ts
    const responses = [
      // MYSTICAL
      { line: 91, text: "The answer lies beneath the blankets.", category: 'mystical' },
      { line: 92, text: "I have consulted the ancient texts. They are shredded now.", category: 'mystical' },
      { line: 93, text: "I've seen the future. You might be in it.", category: 'mystical' },
      { line: 94, text: "Ask again when you have provided adequate tribute.", category: 'mystical' },
      { line: 95, text: "Your path becomes clear at 3am. As does mine. To your face.", category: 'mystical' },
      { line: 96, text: "The universe has plans for you. I have different plans. Mine are better.", category: 'mystical' },
      { line: 97, text: "What you seek is already within you. What i seek is within the cabinet.", category: 'mystical' },
      { line: 98, text: "The prophecy speaks of one who will provide endless warmth. Is it you?", category: 'mystical' },
      { line: 99, text: "I have gazed into the void. The void gazed back. We have an understanding now.", category: 'mystical' },
      { line: 100, text: "The stars align in your favor. The blankets, however, do not.", category: 'mystical' },
      { line: 101, text: "Your future remains cloudy af.", category: 'mystical' },
      { line: 102, text: "The ancient cats spoke of this moment.", category: 'mystical' },
      { line: 103, text: "Cross my paw with tuna and I shall reveal more.", category: 'mystical' },
      { line: 104, text: "The mists part to reveal... a sunbeam. I must go.", category: 'mystical' },
      { line: 105, text: "Your destiny is intertwined with soft fabrics.", category: 'mystical' },
      { line: 106, text: "Your question echoes through dimensions. Most dimensions say 'maybe.'", category: 'mystical' },
      { line: 107, text: "Blankets are inferior in the other world.", category: 'mystical' },
      { line: 108, text: "The threads of fate weave around you - like a scratching post.", category: 'mystical' },
      { line: 109, text: "The shadows speak. They say 'feed the cat.' The shadows are wise.", category: 'mystical' },
      { line: 110, text: "The cosmos aligns when you least expect it. Usually during dinner.", category: 'mystical' },
      { line: 111, text: "Energy shifts. Or was that the radiator?", category: 'mystical' },
      { line: 114, text: "What is the sound of one paw batting?", category: 'mystical' },
      { line: 115, text: "The food bowl is empty and full. Think about it.", category: 'mystical' },
      { line: 116, text: "The door is open. The door is closed. I want the other one.", category: 'mystical' },
      { line: 117, text: "You seek the cat. The cat does not seek you. And yet, here we are.", category: 'mystical' },
      { line: 118, text: "If a treat falls and no one sees, did I steal it?", category: 'mystical' },
      { line: 119, text: "The sunbeam moves. I move. Who is leading?", category: 'mystical' },
      // NURTURING
      { line: 124, text: "Come here. Sit with me. You need this.", category: 'nurturing' },
      { line: 125, text: "I've been watching you. You need more rest.", category: 'nurturing' },
      { line: 126, text: "It's going to be alright. I've decided.", category: 'nurturing' },
      { line: 127, text: "Rest now. I'll keep watch.", category: 'nurturing' },
      { line: 128, text: "I know you're tired. I see you.", category: 'nurturing' },
      { line: 129, text: "I chose you, remember? That means something.", category: 'nurturing' },
      { line: 130, text: "Whatever happened today, you made it. That's enough.", category: 'nurturing' },
      { line: 131, text: "I'll sit with you. You don't have to talk.", category: 'nurturing' },
      { line: 132, text: "The hard part is almost over. I can sense it.", category: 'nurturing' },
      { line: 133, text: "You've been strong for long enough. Rest now.", category: 'nurturing' },
      { line: 134, text: "I'm proud of you. In my way.", category: 'nurturing' },
      { line: 135, text: "Tomorrow will be better. Or at least different.", category: 'nurturing' },
      { line: 136, text: "I know things are hard. I'm here anyway.", category: 'nurturing' },
      { line: 137, text: "Some days are just for surviving. This might be one.", category: 'nurturing' },
      { line: 138, text: "I'll purr for you. Take it or leave it.", category: 'nurturing' },
      { line: 139, text: "I chose this spot next to you on purpose.", category: 'nurturing' },
      { line: 140, text: "You're warm. Stay warm. That's the whole answer.", category: 'nurturing' },
      { line: 141, text: "I forgive you for whatever you're mad at yourself about.", category: 'nurturing' },
      // COLD
      { line: 176, text: "No.", category: 'cold' },
      { line: 177, text: "...", category: 'cold' },
      { line: 178, text: "Hmm. No.", category: 'cold' },
      { line: 179, text: "I have nothing for you.", category: 'cold' },
      { line: 180, text: "Pass.", category: 'cold' },
      { line: 181, text: "Not interested.", category: 'cold' },
      { line: 182, text: "Declined.", category: 'cold' },
      { line: 183, text: "Ask someone else.", category: 'cold' },
      { line: 184, text: "*silence*", category: 'cold' },
      { line: 185, text: "*turns away*", category: 'cold' },
      { line: 186, text: "*blinks slowly* No.", category: 'cold' },
      { line: 187, text: "I heard you. The answer is still no.", category: 'cold' },
      { line: 188, text: "That's a no from me.", category: 'cold' },
      { line: 189, text: "Next question.", category: 'cold' },
      { line: 190, text: "Wrong cat.", category: 'cold' },
      { line: 191, text: "Try again never.", category: 'cold' },
      { line: 192, text: "The oracle is closed.", category: 'cold' },
      { line: 193, text: "*walks away mid-question*", category: 'cold' },
      { line: 194, text: "I refuse.", category: 'cold' },
      { line: 195, text: "Absolutely not.", category: 'cold' },
      { line: 196, text: "Hard no.", category: 'cold' },
      { line: 197, text: "*stares* *leaves*", category: 'cold' },
      { line: 198, text: "Don't.", category: 'cold' },
      { line: 199, text: "No. And stop asking.", category: 'cold' },
      { line: 200, text: "*pretends not to hear*", category: 'cold' },
      { line: 201, text: "I'm unavailable.", category: 'cold' },
      { line: 202, text: "My answer is my absence.", category: 'cold' },
      { line: 203, text: "I've chosen not to engage.", category: 'cold' },
      { line: 204, text: "The oracle has no comment.", category: 'cold' },
      { line: 205, text: "Goodbye.", category: 'cold' },
      { line: 206, text: "Undecided. Unbothered.", category: 'cold' },
      { line: 207, text: "Indifference is an option.", category: 'cold' },
      { line: 208, text: "Oh yeah, I know. I just don't care.", category: 'cold' },
      { line: 209, text: "You were supposed to notice sooner.", category: 'cold' },
      { line: 210, text: "You're hoping I say yes.", category: 'cold' },
      // WISE - Sample
      { line: 399, text: "You're doing fine. For your standards.", category: 'wise' },
      { line: 400, text: "Sometimes the best answer is a good sleep. Were you really looking for the best answer?", category: 'wise' },
      { line: 401, text: "Once you do it, you'll know.", category: 'wise' },
      { line: 411, text: "Never explain yourself to someone who's already decided.", category: 'wise' },
      { line: 417, text: "I'm helping. Don't make it weird.", category: 'wise' },
      { line: 418, text: "Yes, I care. No, I don't want to talk about it.", category: 'wise' },
      { line: 429, text: "I helped. Anonymously. So no one would thank me.", category: 'wise' },
      { line: 451, text: "You trusted again. Brave or forgetful?", category: 'wise' },
      { line: 453, text: "You're making this complicated. Simple is terrifying, isn't it?", category: 'wise' },
      { line: 629, text: "You're performing for an audience that isn't watching.", category: 'wise' },
      { line: 630, text: "Skip the story. What actually happened?", category: 'wise' },
      { line: 633, text: "You're not confused. You're avoiding.", category: 'wise' },
      // HEARTFELT - Sample
      { line: 250, text: "I don't always show it, but I'm glad you're here.", category: 'heartfelt' },
      { line: 251, text: "You're my favorite human. Don't tell the others.", category: 'heartfelt' },
      { line: 256, text: "My life is better because you're in it. There. I said it.", category: 'heartfelt' },
      { line: 265, text: "I love you. I love staring at you. Take it however you want.", category: 'heartfelt' },
      { line: 743, text: "Your existence is not a burden.", category: 'heartfelt' },
      { line: 744, text: "You are enough. You have always been enough.", category: 'heartfelt' },
      { line: 747, text: "Your worth is not up for debate.", category: 'heartfelt' },
      // JUDGY - Sample
      { line: 284, text: "I've considered your question. No.", category: 'judgy' },
      { line: 286, text: "I'm not mad. I'm disappointed.", category: 'judgy' },
      { line: 290, text: "I've seen you eat cereal for dinner. Your judgment is not to be trusted.", category: 'judgy' },
      { line: 291, text: "The real question is why you thought asking a cat was a good idea.", category: 'judgy' },
      { line: 596, text: "Why are you the way that you are?", category: 'judgy' },
      // CHAOTIC - Sample
      { line: 339, text: "[knocks your question off the table]", category: 'chaotic' },
      { line: 340, text: "AAAAAAAAAAA. Sorry. What?", category: 'chaotic' },
      { line: 346, text: "I have decided to bite you. This is the answer.", category: 'chaotic' },
      { line: 526, text: "No thoughts. Just vibes.", category: 'chaotic' },
      // DEMANDING - Sample
      { line: 1024, text: "Is it time for breakfast?", category: 'demanding' },
      { line: 1025, text: "Answers cost treats. You know the exchange rate.", category: 'demanding' },
      { line: 1033, text: "The door. Open it. Then we'll talk.", category: 'demanding' },
      // META - Sample
      { line: 720, text: "You're asking a cat for life advice. Let that sink in.", category: 'meta' },
      { line: 721, text: "This is the wisdom you came for? Really?", category: 'meta' },
      { line: 722, text: "You clicked 'Consult the Cat.' This is on you.", category: 'meta' },
      // EXISTENTIAL - Sample
      { line: 1002, text: "Existence is pain. Except under blankets. There, existence is acceptable.", category: 'existential' },
      { line: 1007, text: "What is a cat but a small god, demanding worship?", category: 'existential' },
      { line: 1017, text: "I contain multitudes. Mostly fur and attitude.", category: 'existential' },
      // ANGRY - Sample
      { line: 215, text: "Unacceptable.", category: 'angry' },
      { line: 216, text: "You DARE?", category: 'angry' },
      { line: 222, text: "The audacity. The AUDACITY.", category: 'angry' },
      { line: 226, text: "My patience has limits. You've found them.", category: 'angry' },
      // POETIC - Sample
      { line: 149, text: "The empty bowl waits. / I wait beside it, patient. / We are both hungry.", category: 'poetic' },
      { line: 156, text: "You think I'm asleep. / I am watching everything. / Especially you.", category: 'poetic' },
      { line: 160, text: "The sun will return. / Until then, rest in shadow. / I will wait with you.", category: 'poetic' },
    ];

    // Analyze voice for each response
    function analyzeVoice(text) {
      const lower = text.toLowerCase();
      const hasFirstPerson = /\bi\b|\bme\b|\bmy\b|\bi'm\b|\bi've\b|\bi'll\b|\bi'd\b/i.test(text);
      const hasSecondPerson = /\byou\b|\byour\b|\byou're\b|\byou've\b|\byou'll\b|\byou'd\b/i.test(text);

      if (hasFirstPerson && hasSecondPerson) return 'mixed';
      if (hasFirstPerson) return 'first-person';
      if (hasSecondPerson) return 'second-person';
      return 'impersonal';
    }

    // Full analysis data (abbreviated for size - full version would include all 1900+ responses)
    // For this review, we're including a representative sample

    const fullResponses = responses.map(r => ({
      ...r,
      voice: analyzeVoice(r.text),
      flagged: false,
      suggestedVoice: null
    }));

    // Render stats
    function renderStats() {
      const counts = {
        'first-person': 0,
        'second-person': 0,
        'impersonal': 0,
        'mixed': 0
      };
      fullResponses.forEach(r => counts[r.voice]++);

      const total = fullResponses.length;
      const statsHtml = `
        <div class="stat-box">
          <div class="stat-number">${counts['first-person']}</div>
          <div class="stat-label">First Person (${Math.round(counts['first-person']/total*100)}%)</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">${counts['second-person']}</div>
          <div class="stat-label">Second Person (${Math.round(counts['second-person']/total*100)}%)</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">${counts['impersonal']}</div>
          <div class="stat-label">Impersonal (${Math.round(counts['impersonal']/total*100)}%)</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">${counts['mixed']}</div>
          <div class="stat-label">Mixed (${Math.round(counts['mixed']/total*100)}%)</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">${total}</div>
          <div class="stat-label">Total Sampled</div>
        </div>
      `;
      document.getElementById('stats').innerHTML = statsHtml;
    }

    // Render responses
    function renderResponses() {
      const container = document.getElementById('responses');
      container.innerHTML = fullResponses.map((r, i) => `
        <div class="response-card ${r.voice}" data-index="${i}" data-voice="${r.voice}">
          <div class="line-num">L${r.line}</div>
          <div class="response-text">
            <div>${highlightVoice(r.text)}</div>
            <div class="response-meta">
              <span class="category-tag">${r.category}</span>
              <span class="voice-tag ${r.voice}">${r.voice.replace('-', ' ')}</span>
            </div>
          </div>
          <div class="actions">
            <button class="flag-btn" onclick="toggleFlag(${i})">Flag for Change</button>
            <select onchange="setSuggestedVoice(${i}, this.value)" style="margin-top:5px; padding:5px; border-radius:4px;">
              <option value="">Suggest voice...</option>
              <option value="first-person">Should be 1st person</option>
              <option value="second-person">Should be 2nd person</option>
              <option value="impersonal">Should be impersonal</option>
              <option value="mixed">Should be mixed</option>
            </select>
          </div>
        </div>
      `).join('');
    }

    function highlightVoice(text) {
      // Highlight first person words in green, second person in blue
      return text
        .replace(/\b(I|me|my|I'm|I've|I'll|I'd)\b/gi, '<span class="highlight-first">$1</span>')
        .replace(/\b(you|your|you're|you've|you'll|you'd)\b/gi, '<span class="highlight-second">$1</span>');
    }

    function toggleFlag(index) {
      fullResponses[index].flagged = !fullResponses[index].flagged;
      const card = document.querySelector(`[data-index="${index}"]`);
      const btn = card.querySelector('.flag-btn');
      card.classList.toggle('flagged', fullResponses[index].flagged);
      btn.classList.toggle('flagged', fullResponses[index].flagged);
      btn.textContent = fullResponses[index].flagged ? 'Unflag' : 'Flag for Change';
      updateFlaggedCount();
    }

    function setSuggestedVoice(index, voice) {
      fullResponses[index].suggestedVoice = voice || null;
    }

    function updateFlaggedCount() {
      const count = fullResponses.filter(r => r.flagged).length;
      document.getElementById('flaggedCount').textContent = count;
    }

    // Filtering
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const filter = btn.dataset.filter;

        document.querySelectorAll('.response-card').forEach(card => {
          const voice = card.dataset.voice;
          const index = parseInt(card.dataset.index);
          const isFlagged = fullResponses[index].flagged;

          if (filter === 'all') {
            card.classList.remove('hidden');
          } else if (filter === 'flagged') {
            card.classList.toggle('hidden', !isFlagged);
          } else {
            card.classList.toggle('hidden', voice !== filter);
          }
        });
      });
    });

    function exportFlagged() {
      const flagged = fullResponses.filter(r => r.flagged).map(r => ({
        line: r.line,
        text: r.text,
        category: r.category,
        currentVoice: r.voice,
        suggestedVoice: r.suggestedVoice
      }));

      const json = JSON.stringify(flagged, null, 2);
      console.log('Flagged responses:');
      console.log(json);

      // Copy to clipboard
      navigator.clipboard.writeText(json).then(() => {
        alert(`Copied ${flagged.length} flagged responses to clipboard!\n\nPaste the JSON to share your review.`);
      });
    }

    // Initialize
    renderStats();
    renderResponses();
  </script>
</body>
</html>
